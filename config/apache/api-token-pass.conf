# SWF Monitor API configuration: allow DRF Token auth and avoid OIDC login redirects
# This layer ensures the Authorization header reaches Django and prevents
# mod_auth_openidc from redirecting API requests to the login flow.

# Make sure Django (DRF) receives the Authorization header
WSGIPassAuthorization On

# For all API endpoints under the /swf-monitor mount:
<LocationMatch "^/swf-monitor/api/">
    # Always allow access at Apache layer; DRF will enforce Token auth
    Require all granted

    # If mod_auth_openidc is active globally, pass unauthenticated requests
    # through to the application without redirecting to the IdP
    <IfModule mod_auth_openidc.c>
        AuthType openid-connect
        OIDCUnAuthAction pass
    </IfModule>
</LocationMatch>
