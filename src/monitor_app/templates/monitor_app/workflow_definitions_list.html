{% extends "monitor_app/_datatable_dynamic_base.html" %}

{% block initial_filters %}
{
    workflow_type: '{{ selected_workflow_type|default:"" }}',
    created_by: '{{ selected_created_by|default:"" }}'
}
{% endblock %}

{% block default_order %}[[4, 'desc']]{% endblock %} <!-- Order by created_at descending -->

{% block update_active_filters_display %}
const badges = [];
// Show workflow_type filter if active
if (currentFilters.workflow_type) {
    badges.push(`<span class="badge bg-info me-1">Type: ${currentFilters.workflow_type}</span>`);
}
// Show created_by filter if active
if (currentFilters.created_by) {
    badges.push(`<span class="badge bg-info me-1">Created by: ${currentFilters.created_by}</span>`);
}

if (badges.length > 0) {
    $('#filter-badges').html(badges.join('&nbsp;&nbsp;'));
    $('#active-filters').show();
} else {
    $('#active-filters').hide();
}

// Update filter link active states
$('.filter-link').removeClass('filter-active');
$('.filter-link[data-filter="workflow_type"][data-value="' + currentFilters.workflow_type + '"]').addClass('filter-active');
$('.filter-link[data-filter="created_by"][data-value="' + currentFilters.created_by + '"]').addClass('filter-active');
{% endblock %}